var App=function(){"use strict";return{}}();$(function(){var a=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext;if(a){var b=new a,c=new App.Music(b),d=new App.Ui(c),e=new Phaser.Game(800,600,Phaser.AUTO,"canvas_container"),f=new App.GameState(d,c,e,800,600);e.state.add("game",f,!0)}else $("#loader").addClass("hidden"),$("#header").text("ERROR"),$("#text").text("This game requires a browser which supports WebAudio.")}),function(a){"use strict";var b=function(a){this.music=a,this.levelString="Level : ",this.highScoreString=" | High score : ",this.touch=!1,this.orientation=null;var b=function(a){var b=null;a.beta>30?b=a.gamma:a.gamma<-30?b=a.beta:a.gamma>30&&(b=-a.beta),null!==b&&(this.orientation=Math.max(Math.min(b/20,1),-1))}.bind(this);window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",b);var c=null;c=function(){$("#splashscreen").unbind("touchend",c),this.touch=!0}.bind(this),$("#splashscreen").bind("touchend",c)};b.prototype.loadScreen=function(a,b){var c=function(c){if(c.preventDefault(),c.stopPropagation(),$("#player").hasClass("fullscreen")){$("#player").removeClass("fullscreen"),$(".help").removeClass("hidden"),null===this.orientation?$(".deviceorientation-on").addClass("hidden"):$(".deviceorientation-off").addClass("hidden"),this.showSplashScreen("","Loading audio");var d=function(){$("#player_pause").removeClass("hidden"),this.startScreen(a,b)}.bind(this);this.music.load(d)}else this.music.mute(),$(".playerbutton").toggleClass("hidden")}.bind(this);this.addHandler($("#player"),c,!1),$("#splashscreen").addClass("hidden"),$("#player").removeClass("hidden")},b.prototype.startScreen=function(a,b){$("#loader").addClass("hidden"),this.showSplashScreen("","Press any key to start your mission."),this.setSplashScreenHandler(a,b)},b.prototype.pauseScreen=function(a,b){this.showSplashScreen("Paused","Press any key to continue."),this.setSplashScreenHandler(a,b)},b.prototype.gameOverScreen=function(a,b){this.showSplashScreen("GAME OVER","");var c=function(){this.showSplashScreen("GAME OVER","Press any key to restart"),this.setSplashScreenHandler(a,b)}.bind(this);setTimeout(c,3e3)},b.prototype.showSplashScreen=function(a,b){$("#header").text(a),$("#text").text(b),$("#splashscreen").removeClass("hidden")},b.prototype.setSplashScreenHandler=function(a,b){var c=function(){this.hideSplashScreen(a,b)}.bind(this);this.addHandler($("#splashscreen"),c,!0)},b.prototype.hideSplashScreen=function(a,b){var c=setInterval(function(){$("#text").toggleClass("flicker")},100);setTimeout(function(){clearInterval(c),$("#text").removeClass("flicker"),$("#header").text(""),$("#text").text(""),$(".help").addClass("hidden"),$("#splashscreen").addClass("hidden"),"undefined"!=typeof a&&a.call(b)},1100)},b.prototype.update=function(a){a.level>a.highScore&&(a.highScore=a.level),$("#menu_left").text(this.levelString+this.format(a.level,5)+this.highScoreString+this.format(a.highScore,5)),$("#health_bar").width(String(a.shield)+"%"),a.bonus>0?($("#energy_bar").addClass("hidden"),$("#bonus_bar").width(String(a.bonus)+"%"),$("#bonus_bar").removeClass("hidden")):($("#bonus_bar").addClass("hidden"),$("#energy_bar").width(String(a.energy)+"%"),$("#energy_bar").removeClass("hidden"))},b.prototype.addHandler=function(a,b,c){var d=null;d=function(e){e.keyCode!==Phaser.Keyboard.CONTROL&&e.keyCode!==Phaser.Keyboard.ALT&&91!==e.keyCode&&(c&&a.off("click",d),$(document).off("keydown",d),b(e))}.bind(this),a.on("click",d),$(document).on("keydown",d)},b.prototype.format=function(a,b){var c=a,d="",e=0;for(e=b;e>0;e--){var f=Math.pow(10,e-1);d+=Math.floor(c/f),c-=Math.floor(c/f)*f}return d},a.Ui=b}(App),function(a){"use strict";var b=function(a){this.context=a,this.sounds={},this.tracks={},this.onLoad=null,this.startDelay=.1,this.extension="."+this.getAudioExtension(),this.muted=!1,this.master=this.context.createGain(),this.master.connect(this.context.destination),this.master.gain.value=1,this.unlocked=!1,this.loading=!1};b.prototype.mute=function(){0===this.master.gain.value?this.master.gain.value=1:this.master.gain.value=0},b.prototype.load=function(b){this.onLoad=b,this.unlock(),this.sounds.hurt=new a.Sound(this,"hurt"),this.sounds.die=new a.Sound(this,"die"),this.sounds.arrow=new a.Sound(this,"arrow"),this.sounds.hit=new a.Sound(this,"hit"),this.sounds.rupee=new a.Sound(this,"rupee"),this.sounds.shield=new a.Sound(this,"shield"),this.tracks.pause=new a.Track(this,"pause",45.176485260770974,{loop:1}),this.tracks.loop1=new a.Track(this,"loop1",39.529433106575965,{loop:.2,loop2:.8}),this.tracks.loop2=new a.Track(this,"loop2",33.88235827664399,{loop:.2,loop1:.8}),this.tracks.drums0=new a.Track(this,"drums0",11.294126984126985,{drums1:1}),this.tracks.drums1=new a.Track(this,"drums1",5.647074829931973,{loop:.8,drums0:.2}),this.tracks.drums2=new a.Track(this,"drums2",11.294126984126985,{loop:.8,drums3:.2}),this.tracks.drums3=new a.Track(this,"drums3",11.294126984126985,{drums2:1}),this.masterTrack=this.tracks.pause},b.prototype.unlock=function(){if(!this.unlocked){this.unlocked=!0;var a=this.context.createBuffer(1,1,22050),b=this.createBufferSource(a);b.connect(this.master),b.start(0)}},b.prototype.ready=function(){var a=null;for(a in this.tracks)if(!this.tracks[a].ready)return!1;for(a in this.sounds)if(!this.sounds[a].ready)return!1;return null!==this.onLoad&&this.onLoad(),!0},b.prototype.pause=function(){this.stopTracks(.1),this.masterTrack=this.tracks.pause,this.tracks.pause.play(0,0)},b.prototype.play=function(){this.stopTracks(.1),this.masterTrack=this.tracks.loop1,this.tracks.loop1.play(0,0),this.tracks.drums1.play(0,0)},b.prototype.stop=function(){this.stopTracks(1)},b.prototype.halfTime=function(){this.tracks.drums0.stop(0,.2),this.tracks.drums1.play(0,.5),this.tracks.drums2.stop(0,.5),this.tracks.drums3.stop(.2)},b.prototype.doubleTime=function(){this.tracks.drums0.stop(0,.2),this.tracks.drums1.stop(0,.2),this.tracks.drums2.play(0,.2),this.tracks.drums3.stop(.2)},b.prototype.createBufferSource=function(a){var b=this.context.createBufferSource();return b.buffer=a,b},b.prototype.loadAudio=function(a,b,c,d){var e=new XMLHttpRequest,f=b+c+this.extension;e.open("GET",f,!0),e.responseType="arraybuffer",e.onload=function(){a.decodeAudioData(e.response,function(a){return a?void d(a):void alert("Error decoding audio file "+f+".")})},e.onerror=function(){alert("Error loading audio file.")},e.send()},b.prototype.stopTracks=function(a){for(var b in this.tracks)this.tracks[b].stop(a)},b.prototype.canPlayAudio=function(a){var b=document.createElement("audio");return!(!b.canPlayType||!b.canPlayType("audio/"+a+";").replace(/no/,""))},b.prototype.getAudioExtension=function(){var a="wav";return this.canPlayAudio("ogg")?a="ogg":this.canPlayAudio("mp4")&&(a="m4a"),a},a.Music=b}(App),function(a){"use strict";var b=function(a,b,c,d){this.music=a,this.key=b,this.config={path:"music/"},this.buffer=null,this.ready=!1,this.duration=c,this.offset=0,this.started=!1,this.deck=0,this.nextMap=d,this.next=null,this.nodes=[{},{}];var e=function(a){this.buffer=a,this.ready=!0,this.music.ready(),this.music.masterTrack===this&&this.play(0,0)}.bind(this);this.music.loadAudio(this.music.context,this.config.path,this.key,e)};b.prototype.play=function(a,b){0===a&&this.started||(this.start(a,b),this.scheduleNext())},b.prototype.start=function(a,b){this.plays=1,0===a?(this.startTime=this.music.context.currentTime+this.music.startDelay,this.offset=(this.startTime-this.music.masterTrack.startTime)%this.music.masterTrack.duration%this.duration):(this.startTime=a,this.offset=0),this.startDeck(this.startTime,this.offset,b),this.started=!0},b.prototype.startDeck=function(a,b,c){0===this.deck?this.deck=1:this.deck=0;var d=this.nodes[this.deck];d.source=this.music.createBufferSource(this.buffer),d.source.playbackRate.value=1,d.gain=this.music.context.createGain(),d.source.connect(d.gain),d.gain.connect(this.music.master),d.source.start(a,b),c>0?(d.gain.gain.linearRampToValueAtTime(0,a),d.gain.gain.linearRampToValueAtTime(1,a+c)):d.gain.gain.value=1,d.source.onended=this.onEnded.bind(this)},b.prototype.loop=function(a){this.startDeck(a,0,0)},b.prototype.scheduleNext=function(){var a=Math.random();for(var b in this.nextMap){if(a<=this.nextMap[b]){var c=this.startTime+this.duration*this.plays-this.offset;"loop"===b?(this.next=this.key,this.loop(c)):(this.music.tracks[b].start(c,0),this.next=b);break}a-=this.nextMap[b]}},b.prototype.onEnded=function(){this.plays+=1,this.music.masterTrack===this&&this.next!==this.key&&(this.music.masterTrack=this.music.tracks[this.next]),this.music.tracks[this.next].scheduleNext(),this.next!==this.key&&(this.started=!1)},b.prototype.stop=function(a){for(var b=0;2>b;b++)if("undefined"!=typeof this.nodes[b].source){this.nodes[b].source.onended=null,a>0&&(this.nodes[b].gain.gain.linearRampToValueAtTime(0,this.music.context.currentTime+a),this.started=!1);try{this.nodes[b].source.stop(this.music.context.currentTime+a),this.started=!1}catch(c){}}},a.Track=b}(App),function(a){"use strict";var b=function(a,b){this.music=a,this.key=b,this.config={path:"sounds/",gain:.6,retriggerdelay:.1},this.buffer=null,this.ready=!1,this.startTime=null;var c=function(a){this.buffer=a,this.ready=!0,this.music.ready()}.bind(this);a.loadAudio(this.music.context,this.config.path,this.key,c)};b.prototype.play=function(){var a=this.music.context.currentTime;if(null===this.startTime||a>this.startTime+this.config.retriggerdelay){this.startTime=a;var b={};b.source=this.music.createBufferSource(this.buffer),b.source.playbackRate.value=1,b.gain=this.music.context.createGain(),b.source.connect(b.gain),b.gain.connect(this.music.master),b.source.start(0),b.gain.gain.value=this.config.gain}},a.Sound=b}(App),function(a){"use strict";var b=function(a,b,c,d,e){this.width=d,this.height=e,this.game=c,this.ui=a,this.music=b,this.sounds=b.sounds};b.prototype.init=function(){this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.setMinMax(0,0,this.width,this.height),this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0},b.prototype.preload=function(){this.game.load.image("bullet","img/bullet.png"),this.game.load.spritesheet("earth","img/earth.png",50,50),this.game.load.image("playerLight","img/light_800x600.png"),this.game.load.image("ship","img/ship.png"),this.game.load.spritesheet("kaboom","img/explosion.png",128,128),this.game.load.image("starfield","img/starfield.png",this.width,this.height)},b.prototype.create=function(){this.starfield=this.game.add.tileSprite(0,0,this.width,this.height,"starfield"),this.bullets=this.game.add.group(),this.bullets.enableBody=!0,this.bullets.physicsBodyType=Phaser.Physics.ARCADE,this.bullets.createMultiple(30,"bullet"),this.bullets.setAll("anchor.x",.5),this.bullets.setAll("anchor.y",1),this.bullets.setAll("outOfBoundsKill",!0),this.bullets.setAll("checkWorldBounds",!0),this.bulletTime=0,this.player=new a.Player(this.game,this.ui,this.music,this.width),this.earth=new a.Earth(this.game,this.sounds,this.player,this.width,this.height),this.light={},this.light.texture=this.game.add.bitmapData(this.width,this.height),this.light.image=this.game.add.image(0,0,this.light.texture),this.light.image.blendMode=Phaser.blendModes.MULTIPLY,this.updateShadowTexture(),this.input.cursors=this.game.input.keyboard.createCursorKeys(),this.input.fireButton=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.input.pauseButton=this.game.input.keyboard.addKey(Phaser.Keyboard.P),this.input.pointer1=this.game.input.addPointer(),this.input.movement=0,this.input.isFiring=!1,this.input.ui=this.ui,this.input.update=function(){null!==this.ui.orientation?this.movement=this.ui.orientation:this.cursors.left.isDown?this.movement=-1:this.cursors.right.isDown?this.movement=1:this.movement=0,this.fireButton.isDown||this.pointer1.isDown?this.isFiring=!0:this.isFiring=!1},this.game.paused=!0,this.ui.loadScreen(this.play,this)},b.prototype.updateShadowTexture=function(){var a=400;this.light.texture.context.fillStyle="rgb(0, 0, 0)",this.light.texture.context.fillRect(0,0,this.width,this.height);var b=function(b){var c=this.light.texture.context.createRadialGradient(b.x,b.y,0,b.x,b.y,a);c.addColorStop(0,"rgba(255, 255, 255, 1.0)"),c.addColorStop(.1,"rgba(255, 255, 255, 1.0)"),c.addColorStop(.2,"rgba(255, 255, 255, 0.5)"),c.addColorStop(.3,"rgba(255, 255, 255, 0.25)"),c.addColorStop(.4,"rgba(255, 255, 255, 0.125)"),c.addColorStop(.5,"rgba(255, 255, 255, 0.0625)"),c.addColorStop(1,"rgba(255, 255, 255, 0.0)"),this.light.texture.context.beginPath(),this.light.texture.context.fillStyle=c,this.light.texture.context.arc(b.x,b.y,a,0,2*Math.PI),this.light.texture.context.fill()}.bind(this);this.player.sprite.alive?this.light.texture.draw("playerLight",this.player.sprite.x-this.width/2,50):b(this.player.sprite),this.bullets.forEachAlive(b),this.light.texture.dirty=!0},b.prototype.update=function(){var a=.2,b=20,c=40;this.starfield.tilePosition.y-=1,this.earth.update(),this.updateShadowTexture(),this.input.update(),this.player.sprite.body.velocity.x+=this.input.movement*b;var d=a;Math.abs(this.player.sprite.body.velocity.x)>c&&(d*=d),this.player.sprite.body.velocity.x=Math.sign(this.player.sprite.body.velocity.x)*Math.floor((1-d)*Math.abs(this.player.sprite.body.velocity.x)),this.input.isFiring&&this.fireBullet(),this.player.sprite.x<this.player.sprite.width/2?(this.player.sprite.x=this.player.sprite.width/2,this.player.sprite.body.velocity.x=0):this.player.sprite.x>this.width-this.player.sprite.width/2&&(this.player.sprite.x=this.width-this.player.sprite.width/2,this.player.sprite.body.velocity.x=0),this.game.physics.arcade.overlap(this.bullets,this.earth.edges,this.bulletHitsEarth,null,this),this.game.physics.arcade.overlap(this.earth.edges,this.player.sprite,this.playerHitsEarth,null,this)},b.prototype.play=function(){this.game.paused=!1,this.music.play(),this.player.bonus>0&&this.music.doubleTime(),this.input.pauseButton.onDown.add(this.pause,this)},b.prototype.pause=function(){this.game.paused=!0,this.music.pause(),this.ui.pauseScreen(this.play,this),this.input.pauseButton.onDown.remove(this.pause,this)},b.prototype.restart=function(){this.earth.reset(),this.player.reset(),this.music.play(),this.input.pauseButton.onDown.add(this.pause,this)},b.prototype.bulletHitsEarth=function(a,b){b.frame<this.earth.frames.HEALTH&&(a.kill(),this.earth.explode(b),this.earth.kill(b))},b.prototype.playerHitsEarth=function(a,b){b.frame>=this.earth.frames.HEALTH?(this.playerHitsGoodie(b),this.earth.kill(b)):(this.playerTakesHit(b),this.earth.kill(b))},b.prototype.fireBullet=function(){if(this.player.sprite.alive&&this.game.time.now>this.bulletTime&&(this.player.energy>0||this.player.bonus>0)){var a=this.bullets.getFirstExists(!1);a&&(this.player.bonus>0?(a.reset(this.player.sprite.x-22,this.player.sprite.y+30),a.body.velocity.y=400,a.body.velocity.x=this.player.sprite.body.velocity.x/2,this.bulletTime=this.game.time.now+200,a=this.bullets.getFirstExists(!1),a.reset(this.player.sprite.x+22,this.player.sprite.y+30),a.body.velocity.y=400,a.body.velocity.x=this.player.sprite.body.velocity.x/2,this.bulletTime=this.game.time.now+200,this.sounds.arrow.play()):(a.reset(this.player.sprite.x,this.player.sprite.y+30),a.body.velocity.y=400,a.body.velocity.x=this.player.sprite.body.velocity.x/2,this.bulletTime=this.game.time.now+200,this.sounds.arrow.play(),this.player.energy-=10))}},b.prototype.playerHitsGoodie=function(a){a.frame===this.earth.frames.HEALTH?this.player.shield+=Math.min(20,100-this.player.shield):a.frame===this.earth.frames.ENERGY?this.player.energy+=Math.min(20,100-this.player.energy):a.frame===this.earth.frames.BONUS&&(this.music.doubleTime(),this.player.bonus=100),this.sounds.rupee.play(),this.ui.update(this.player)},b.prototype.playerTakesHit=function(a){this.player.shield-=10,this.ui.update(this.player),this.sounds.hurt.play(),this.earth.explode(a),this.player.shield<=0&&(this.player.sprite.kill(),this.sounds.die.play(),this.music.pause(),this.ui.gameOverScreen(this.restart,this),this.input.pauseButton.onDown.remove(this.pause,this))},a.GameState=b}(App),function(a){"use strict";var b=function(a,b,c,d){this.game=a,this.ui=b,this.music=c,this.width=d,this.level=0,this.highScore=0,this.shield=100,this.energy=100,this.bonus=0,this.sprite=this.game.add.sprite(this.width/2,80,"ship"),this.sprite.anchor.setTo(.5,.5),this.game.physics.enable(this.sprite,Phaser.Physics.ARCADE)};b.prototype.reset=function(){this.level=-1,this.shield=100,this.energy=100,this.bonus=0,this.sprite.revive(),this.sprite.x=this.width/2},b.prototype.update=function(a){this.level=a,this.energy<100&&(this.energy+=1),this.bonus>0&&(this.bonus-=1,0===this.bonus&&this.music.halfTime()),this.sprite.alive&&this.ui.update(this)},a.Player=b}(App),function(a){"use strict";var b=function(a,b,c,d,e){this.game=a,this.sounds=b,this.player=c,this.width=d,this.height=e,this.config={initialAutocorrelation:.9,difficultyFactor:.9999,levelHeight:50,blockWidth:50},this.frames={HEALTH:16,ENERGY:17,BONUS:18},this.nBlocks=this.width/this.config.blockWidth,this.nLevels=Math.floor(this.height/this.config.levelHeight),this.autocorrelation=null,this.dice=null,this.items=this.game.add.group(),this.items.enableBody=!0,this.items.physicsBodyType=Phaser.Physics.ARCADE,this.items.createMultiple(this.nBlocks*(this.nLevels+4),"earth"),this.edges=this.game.add.group(),this.lastRow=[],this.previousRow=[],this.explosions=this.game.add.group(),this.explosions.createMultiple(30,"kaboom");var f=function(a){a.anchor.x=.5,a.anchor.y=.5,a.animations.add("kaboom")};this.explosions.forEach(f,this),this.reset()};b.prototype.reset=function(){this.items.y=0,this.edges.y=0,this.explosions.y=0;for(var a=0;a<this.nBlocks;a++)this.lastRow[a]=null;this.autocorrelation=this.config.initialAutocorrelation,this.dice=.5,this.items.addMultiple(this.edges),this.items.forEach(this.resetItem,this)},b.prototype.resetItem=function(a){a.kill(),a.anchor.setTo(0,0),a.body.moves=!1,a.neighbors={top:null,left:null,right:null,bottom:null},a.frame=0},b.prototype.kill=function(a){a.kill(),this.updateNeighborsAfterKilling(a),a.neighbors={top:null,left:null,right:null,bottom:null},a.frame>0&&(this.edges.remove(a),this.items.add(a),a.frame=0)},b.prototype.isBlock=function(a){return null!==a&&a.frame<this.frames.HEALTH},b.prototype.setFrame=function(a){null!==a&&(0===a.frame&&(this.isBlock(a.neighbors.left)||(a.frame+=1),this.isBlock(a.neighbors.bottom)||(a.frame+=2),this.isBlock(a.neighbors.right)||(a.frame+=4),this.isBlock(a.neighbors.top)||(a.frame+=8)),a.frame>0&&(this.items.remove(a),this.edges.add(a)))},b.prototype.incrementFrame=function(a,b){0===a.frame&&(this.edges.add(a),this.items.remove(a)),a.frame+=b},b.prototype.updateNeighborsAfterKilling=function(a){this.isBlock(a)&&(this.isBlock(a.neighbors.top)&&(a.neighbors.top.neighbors.bottom=null,this.incrementFrame(a.neighbors.top,2)),this.isBlock(a.neighbors.left)&&(a.neighbors.left.neighbors.right=null,this.incrementFrame(a.neighbors.left,4)),this.isBlock(a.neighbors.right)&&(a.neighbors.right.neighbors.left=null,this.incrementFrame(a.neighbors.right,1)),this.isBlock(a.neighbors.bottom)&&(a.neighbors.bottom.neighbors.top=null,this.incrementFrame(a.neighbors.bottom,8)))},b.prototype.explode=function(a){this.sounds.hit.play();var b=this.explosions.getFirstExists(!1);b&&(b.reset(a.body.x+a.body.width/2,-this.items.y+a.body.y+a.body.height/2),b.play("kaboom",30,!1,!0))},b.prototype.update=function(){var a=4,b=0;this.player.sprite.alive||(a=1),this.items.y-=a,this.edges.y-=a,this.explosions.y-=a,b=Math.floor(-this.items.y/50)+1,b>this.player.level&&this.updateLevel(b)},b.prototype.updateLevel=function(a){var b=0,c=0,d=0,e=null,f=null,g=null;for(this.player.update(a),this.autocorrelation=this.autocorrelation*this.config.difficultyFactor,this.dice=(1-this.autocorrelation)*Math.random()+this.autocorrelation*this.dice,c=this.dice*this.nBlocks,d=Math.round(3*Math.random())+3,this.previousRow=this.lastRow,this.lastRow=new Array(this.nBlocks),b=0;b<this.nBlocks;b++){if(e=null,f=null,c-d/2>b||b>c+d/2)f=0;else{var h=Math.random();h>.999?f=this.frames.BONUS:h>.995?f=this.frames.HEALTH:h>.98&&(f=this.frames.ENERGY)}null!==f&&(e=this.items.getFirstExists(!1),null!==e&&(e.reset(b*this.config.blockWidth,this.height+a*this.config.levelHeight),e.frame=f)),this.lastRow[b]=e}for(b=0;b<this.nBlocks;b++)null!==this.lastRow[b]&&(this.lastRow[b].neighbors.left=this.lastRow[((b-1)%this.nBlocks+this.nBlocks)%this.nBlocks],this.lastRow[b].neighbors.right=this.lastRow[(b+1)%this.nBlocks],this.lastRow[b].neighbors.top=this.previousRow[b]),null!==this.previousRow[b]&&(this.previousRow[b].neighbors.bottom=this.lastRow[b]);for(b=0;b<this.nBlocks;b++)this.setFrame(this.previousRow[b]);g=function(a){null!==a&&null!==a.body&&a.body.y<0&&this.kill(a)}.bind(this),this.items.forEachAlive(g,this),this.edges.forEachAlive(g,this)},a.Earth=b}(App);